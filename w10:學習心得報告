w10: Webots 是什麼？有什麼特點？ 如何進行場景模擬？ 如何用 Python 進行控制系統設計？ 
答:Webots 是一個 開源的專業級機器人模擬平台（由 Cyberbotics 開發）。
廣泛用於：

機器人控制系統開發

SLAM／自走車研究

機械手臂與多自由度機構

教育／研究用模擬

ROS / Python / C / C++ / MATLAB / Java 開發

它的目標是讓你在 完全虛擬的 3D 環境中測試機器人控制系統，不必先造實體。

Webots 的主要特點
1. 真實物理引擎（ODE）

包括：

重力

摩擦力

碰撞

關節力矩 / 馬達控制

質量 / 慣性張量

連桿與機構運動

適合測試類似“機器人倒立擺”、“四足機器人步態”、“輪式路徑跟蹤”等控制。

2. 支援多種機器人元件

內建模組：

輪子、馬達、關節（伺服、位置、速度）、連桿

相機、雷達、Lidar、IMU、GPS、陀螺儀

距離感測器、觸覺感測器、力矩感測器

幾乎任何實體感測器都能虛擬化。

3. 強大的 3D 場景建構工具

可匯入：

STL

OBJ

URDF

Proto modules

可以直接建立城市、房間、工廠、生態環境、地形。

4. 內建 ROS / Python API

你可以直接用：

Python 控制馬達

Python 接收感測器資料

Python 實作 PID、LQR、MPC 控制器

或連接 ROS2 進行 SLAM

非常適合控制理論研究與機器人課程。

如何在 Webots 建立與模擬場景？

以下是一般流程：

✔ 1. 建立世界（World）

檔案：*.wbt

流程：

1. File → New World
2. 在左側 “Scene Tree” 加入物件
例如：

地面（Floor）

Box、Cylinder

灯光

機器人（如 TurtleBot、Nao、四輪車）

✔ 2. 加入機器人（Robot）

你可以直接使用內建：

TurtleBot3

e-puck

Pioneer 3-DX

四足機器人 Spot-like models

Manipulator 手臂

也可以匯入自己的 URDF / STL。

✔ 3. 加入感測器 / 馬達

在 Robot 節點下加入：

Motor
DistanceSensor
Camera
Lidar
GPS
Gyro
Accelerometer


每個裝置都有設定：

更新頻率

分辨率

測量範圍

模擬雜訊（Noise）

✔ 4. 按下「Play Simulation」

可以選：

Fast

Real-time

Slow motion

你會看到機器人開始運作，包括動力學、碰撞、感測器讀值。

如何用 Python 實作控制系統？

Webots 提供完整 Python API：
只要在 robot 物件內指定 controller 程式即可：

✔ 1. 建立 Controller

Webots 的控制程式放在：

worlds/
controllers/your_controller_name/
    your_controller_name.py

✔ 2. Python 基本控制程式模板
📌 例：輪式機器人速度控制 (最基本)
from controller import Robot

robot = Robot()
timestep = int(robot.getBasicTimeStep())

# 取得馬達
left_motor = robot.getDevice("left wheel motor")
right_motor = robot.getDevice("right wheel motor")
left_motor.setPosition(float("inf"))     # 轉成速度控制模式
right_motor.setPosition(float("inf"))

left_motor.setVelocity(0.0)
right_motor.setVelocity(0.0)

while robot.step(timestep) != -1:
    # 簡單前進控制
    left_motor.setVelocity(3.0)
    right_motor.setVelocity(3.0)

✔ 3. 加入感測器（例如：距離感測器）
ds = robot.getDevice("front distance sensor")
ds.enable(timestep)


讀值：

value = ds.getValue()

✔ 4. 寫入控制器（ex: PID 控制）
📌 PID 速度控制例子：
error = target_speed - current_speed
integral += error * dt
derivative = (error - last_error) / dt
output = kp*error + ki*integral + kd*derivative
last_error = error


可以控制：

馬達速度

車頭角度

平衡車倒立控制（倒立擺）

四足步態頻率

✔ 5. 高階控制（LQR / MPC / SLAM）

你可以在 Python 裡使用：

NumPy

SciPy

控制系統工具箱 (python-control)

來實作：

狀態空間模型

LQR 控制器

MPC 預測控制

EKF / UKF

自駕車軌跡跟蹤

Path planning (RRT*, A*)

例如：

import numpy as np
from control import lqr


這些都可直接與 Webots 連動，做到非常專業的控制模擬。
